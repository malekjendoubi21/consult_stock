<div class="articles-container">
  <div class="articles-content">
    <!-- Header moderne -->
    <div class="articles-header">
      <div class="flex justify-between items-center">
        <div>
          <h1 class="articles-title">Gestion des Articles</h1>
          <p class="admin-subtitle">Gérer le catalogue d'articles</p>
        </div>
        <button 
          (click)="showAdd()" 
          class="btn btn-primary">
          <i class="fas fa-plus"></i>
          Ajouter un article
        </button>
      </div>
    </div>

    <!-- Tableau des articles -->
    <div class="articles-table">
      <table class="table">
        <thead>
          <tr>
            <th>Code</th>
            <th>Nom</th>
            <th>Prix HT</th>
            <th>Prix TTC</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let article of articles" class="article-item">
            <td>
              <span class="font-mono font-semibold text-blue-600">{{ article.codeArticle }}</span>
            </td>
            <td>
              <span class="font-medium">{{ article.nom }}</span>
            </td>
            <td>
              <span class="price-badge">{{ article.prixHT | currency:'EUR':'symbol':'1.2-2' }}</span>
            </td>
            <td>
              <span class="price-badge">{{ article.prixTTC | currency:'EUR':'symbol':'1.2-2' }}</span>
            </td>
            <td class="text-center">
              <div class="article-actions">
                <button 
                  (click)="showDetail(article)"
                  class="btn-view"
                  title="Voir les détails">
                  <i class="fas fa-eye"></i>
                </button>
                <button 
                  (click)="showEdit(article)"
                  class="btn-edit"
                  title="Modifier">
                  <i class="fas fa-edit"></i>
                </button>
                <button 
                  (click)="deleteArticle(article.id!)"
                  class="btn-delete"
                  title="Supprimer">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Modal d'ajout -->
  <div *ngIf="showAddCard" class="modal-overlay">
    <div class="modal article-card" style="max-width: 500px; width: 100%;">
      <div class="card-header">
        <h3 class="card-title">Ajouter un article</h3>
      </div>
      <div class="card-body">
        <form (ngSubmit)="saveArticle()">
          <div class="article-form-group">
            <label class="article-form-label">Code Article</label>
            <input 
              type="text" 
              [(ngModel)]="currentArticle.codeArticle" 
              name="codeArticle"
              class="article-form-control"
              placeholder="Saisir le code article"
              required>
          </div>
          <div class="article-form-group">
            <label class="article-form-label">Nom</label>
            <input 
              type="text" 
              [(ngModel)]="currentArticle.nom" 
              name="nom"
              class="article-form-control"
              placeholder="Saisir le nom de l'article"
              required>
          </div>
          <div class="article-form-group">
            <label class="article-form-label">Prix HT</label>
            <input 
              type="number" 
              [(ngModel)]="currentArticle.prixHT" 
              name="prixHT"
              step="0.01"
              class="article-form-control"
              placeholder="0.00"
              required>
          </div>
          <div class="article-form-group">
            <label class="article-form-label">Prix TTC</label>
            <input 
              type="number" 
              [(ngModel)]="currentArticle.prixTTC" 
              name="prixTTC"
              step="0.01"
              class="article-form-control"
              placeholder="0.00"
              required>
          </div>
        </form>
      </div>
      <div class="card-footer">
        <div class="flex justify-end gap-3">
          <button 
            type="button" 
            (click)="hideAllCards()"
            class="btn btn-secondary">
            Annuler
          </button>
          <button 
            (click)="saveArticle()"
            class="btn btn-primary">
            <i class="fas fa-save"></i>
            Ajouter
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de modification -->
  <div *ngIf="showEditCard" class="modal-overlay">
    <div class="modal article-card" style="max-width: 500px; width: 100%;">
      <div class="card-header">
        <h3 class="card-title">Modifier l'article</h3>
      </div>
      <div class="card-body">
        <form (ngSubmit)="saveArticle()">
          <div class="article-form-group">
            <label class="article-form-label">Code Article</label>
            <input 
              type="text" 
              [(ngModel)]="currentArticle.codeArticle" 
              name="codeArticle"
              class="article-form-control"
              required>
          </div>
          <div class="article-form-group">
            <label class="article-form-label">Nom</label>
            <input 
              type="text" 
              [(ngModel)]="currentArticle.nom" 
              name="nom"
              class="article-form-control"
              required>
          </div>
          <div class="article-form-group">
            <label class="article-form-label">Prix HT</label>
            <input 
              type="number" 
              [(ngModel)]="currentArticle.prixHT" 
              name="prixHT"
              step="0.01"
              class="article-form-control"
              required>
          </div>
          <div class="article-form-group">
            <label class="article-form-label">Prix TTC</label>
            <input 
              type="number" 
              [(ngModel)]="currentArticle.prixTTC" 
              name="prixTTC"
              step="0.01"
              class="article-form-control"
              required>
          </div>
        </form>
      </div>
      <div class="card-footer">
        <div class="flex justify-end gap-3">
          <button 
            type="button" 
            (click)="hideAllCards()"
            class="btn btn-secondary">
            Annuler
          </button>
          <button 
            (click)="saveArticle()"
            class="btn btn-warning">
            <i class="fas fa-save"></i>
            Modifier
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de détail -->
  <div *ngIf="showDetailCard && selectedArticle" class="modal-overlay">
    <div class="modal article-card" style="max-width: 500px; width: 100%;">
      <div class="card-header">
        <h3 class="card-title">Détails de l'article</h3>
      </div>
      <div class="card-body">
        <div class="space-y-4">
          <div class="article-form-group">
            <label class="article-form-label">ID</label>
            <p class="text-lg font-semibold text-gray-900">{{ selectedArticle.id }}</p>
          </div>
          <div class="article-form-group">
            <label class="article-form-label">Code Article</label>
            <p class="text-lg font-mono font-semibold text-blue-600">{{ selectedArticle.codeArticle }}</p>
          </div>
          <div class="article-form-group">
            <label class="article-form-label">Nom</label>
            <p class="text-lg font-medium text-gray-900">{{ selectedArticle.nom }}</p>
          </div>
          <div class="article-form-group">
            <label class="article-form-label">Prix HT</label>
            <p class="price-badge badge-success">{{ selectedArticle.prixHT | currency:'EUR':'symbol':'1.2-2' }}</p>
          </div>
          <div class="article-form-group">
            <label class="article-form-label">Prix TTC</label>
            <p class="price-badge badge-primary">{{ selectedArticle.prixTTC | currency:'EUR':'symbol':'1.2-2' }}</p>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <div class="flex justify-end">
          <button 
            (click)="hideAllCards()"
            class="btn btn-secondary">
            <i class="fas fa-times"></i>
            Fermer
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
